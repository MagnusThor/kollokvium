!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),i=r(n(3));class s{constructor(){this.rtcConfig={iceTransports:"all",rtcpMuxPolicy:"require",bundlePolicy:"max-bundle",iceServers:[{urls:"stun:stun.l.google.com:19302"}]};const e=location.hash.replace("#","");let t=document.querySelector(".full"),n=document.querySelector("#slug"),r=document.querySelector("#joinconference"),s=document.querySelector("#share-container"),a=document.querySelector(".chat"),c=document.querySelector("#chat-message"),u=document.querySelector("#chat-nick"),l=document.querySelector("#chatmessages");new i.default("#share-link",{text:e=>(e.textContent="Done!",location.origin+"/#"+n.value)});e.length>=6&&(n.value=e,r.disabled=!1),document.querySelector("#close-chat").addEventListener("click",()=>{a.classList.toggle("d-none")}),document.querySelector("#show-chat").addEventListener("click",()=>{a.classList.toggle("d-none")});n.addEventListener("keyup",()=>{n.value.length>=6?r.disabled=!1:r.disabled=!0}),u.value=Math.random().toString(36).substring(8),u.addEventListener("click",()=>{u.value=""}),r.addEventListener("click",()=>{r.classList.add("hide"),document.querySelector(".remote").classList.remove("hide"),document.querySelector(".overlay").classList.add("d-none"),document.querySelector(".join").classList.add("d-none"),this.rtcClient.ChangeContext(n.value)}),this.factory=this.connect("wss://simpleconf.herokuapp.com/",{}),this.factory.OnClose=(e=>{console.error(e)}),this.factory.OnOpen=(e=>{console.log("OnOpen",e),e.On("instantMessage",e=>{let t=document.createElement("p");t.textContent=e.text;let n=document.createElement("mark");n.textContent=e.from,t.prepend(n),l.prepend(t)}),c.addEventListener("keyup",e=>{13==e.keyCode&&(this.sendMessage(u.value,c.value),c.value="")}),this.rtcClient=new o.ThorIOClient.WebRTC(e,this.rtcConfig),this.rtcClient.OnLocalStream=(e=>{}),this.rtcClient.OnContextConnected=(e=>{}),this.rtcClient.OnContextCreated=(e=>{}),this.rtcClient.OnContextChanged=(e=>{this.rtcClient.ConnectContext(),console.log("looks like we are abut to join a context...",e)}),this.rtcClient.OnContextDisconnected=(e=>{console.log("lost connection to",e),document.querySelector("#p"+e.id).remove()}),this.rtcClient.OnContextConnected=(e=>{console.log("connected to",e),document.querySelector(".remote").classList.remove("hide"),((e,n)=>{s.classList.contains("hide")||s.classList.add("hide");let r=document.createElement("video");r.srcObject=e,r.setAttribute("id","p"+n),r.autoplay=!0,document.querySelector("#remote-videos").append(r),r.addEventListener("click",e=>{t.play(),t.srcObject=e.target.srcObject})})(e.stream,e.id)}),this.rtcClient.OnRemoteTrack=((e,t)=>{console.log("looks like we got a remote media steamTrack",e)}),this.rtcClient.OnContextCreated=function(e){console.log("got a context from the broker",e)},e.OnOpen=(e=>{console.log("connected to broker, no get a local media stream"),navigator.mediaDevices.getUserMedia({video:{width:{min:640,ideal:1280},height:{min:400,ideal:720}},audio:!0}).then(e=>{this.rtcClient.AddLocalStream(e),(e=>{document.querySelector(".local video").srcObject=e})(e)}).catch(e=>{console.error(e)})}),e.Connect()})}sendMessage(e,t){0==e.length&&(e="NoName");const n={text:t,from:e};this.factory.GetProxy("broker").Invoke("instantMessage",n)}connect(e,t){var n=e;return new o.ThorIOClient.Factory(n,["broker"])}static getInstance(){return new s}}t.App=s,document.addEventListener("DOMContentLoaded",()=>{s.getInstance()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(2))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=function(){function t(t,n){this.arrayBuffer=n,this.header=new Uint8Array(e.Utils.longToArray(t.length)),this.Buffer=this.joinBuffers(this.joinBuffers(this.header.buffer,e.Utils.stingToBuffer(t).buffer),n)}return t.fromArrayBuffer=function(t){var r=new Uint8Array(t),o=r.slice(0,8),i=e.Utils.arrayToLong(o),s=o.byteLength+i,a=r.slice(o.byteLength,s),c=t.byteLength-s,u=r.slice(s,c),l=JSON.parse(String.fromCharCode.apply(null,new Uint16Array(a)));return new n(l.T,l.D,l.C,u)},t.prototype.joinBuffers=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer},t}();e.BinaryMessage=t;var n=function(){function t(e,t,n,r){this.D=t,this.T=e,this.C=n,this.B=r}return Object.defineProperty(t.prototype,"JSON",{get:function(){return{T:this.T,D:JSON.stringify(this.D),C:this.C}},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return JSON.stringify(this.JSON)},t.fromArrayBuffer=function(t){return e.BinaryMessage.fromArrayBuffer(t)},t}();e.Message=n;var r=function(){return function(){}}();e.PeerConnection=r;var o=function(){return function(e,t){this.id=e,this.RTCPeer=t,this.stream=new MediaStream}}();e.WebRTCConnection=o;var i=function(){function e(e,t,n){var r=this;this.stream=e,this.mimeType=t,this.ignoreMutedMedia=n,this.recorder=new MediaRecorder(e,{mimeType:t,ignoreMutedMedia:n}),this.recorder.onstop=function(e){r.handleStop(e)},this.recorder.ondataavailable=function(e){r.handleDataAvailable(e)}}return e.prototype.handleStop=function(e){this.IsRecording=!1;var t=new Blob(this.blobs,{type:this.mimeType});this.OnRecordComplated.apply(e,[t,URL.createObjectURL(t)])},e.prototype.OnRecordComplated=function(e,t){},e.prototype.handleDataAvailable=function(e){e.data.size>0&&this.blobs.push(e.data)},e.prototype.IsTypeSupported=function(e){throw"not yet implemented"},e.prototype.GetStats=function(){return{videoBitsPerSecond:this.recorder.videoBitsPerSecond,audioBitsPerSecond:this.recorder.audioBitsPerSecond}},e.prototype.Stop=function(){this.recorder.stop()},e.prototype.Start=function(e){this.blobs=new Array,this.IsRecording?this.Stop():(this.blobs.length=0,this.IsRecording=!0,this.recorder.start(e||100))},e}();e.Recorder=i;var s=function(){return function(e,t,n){this.peerId=e,this.dataChannel=t,this.label=n}}();e.PeerChannel=s;var a=function(){function t(e,t){this.listeners=t||new Array,this.PeerChannels=new Array,this.Name=e}return t.prototype.On=function(t,n){var r=new e.Listener(t,n);return this.listeners.push(r),r},t.prototype.OnOpen=function(e,t){},t.prototype.OnClose=function(e,t){},t.prototype.OnMessage=function(e){var t=JSON.parse(e.data),n=this.findListener(t.T);n&&n.fn.apply(this,[JSON.parse(t.D)])},t.prototype.Close=function(){this.PeerChannels.forEach(function(e){e.dataChannel.close()})},t.prototype.findListener=function(e){return this.listeners.filter(function(t){return t.topic===e})[0]},t.prototype.Off=function(e){var t=this.listeners.indexOf(this.findListener(e));t>=0&&this.listeners.splice(t,1)},t.prototype.Invoke=function(t,n,r){var o=this;return this.PeerChannels.forEach(function(r){"open"===r.dataChannel.readyState&&r.dataChannel.send(new e.Message(t,n,o.Name).toString())}),this},t.prototype.AddPeerChannel=function(e){this.PeerChannels.push(e)},t.prototype.RemovePeerChannel=function(e,t){var n=this.PeerChannels.filter(function(t){return t.peerId===e})[0],r=this.PeerChannels.indexOf(n);r>-1&&this.PeerChannels.splice(r,1)},t}();e.DataChannel=a;var c=function(){return function(e,t){this.videobandwidth=e,this.audiobandwidth=t}}();e.BandwidthConstraints=c;var u=function(){function e(e,t){var n=this;this.brokerProxy=e,this.rtcConfig=t,this.getPeerIndex=function(e){return this.Peers.findIndex(function(t){return t.id===e})},this.Errors=new Array,this.DataChannels=new Array,this.Peers=new Array,this.LocalStreams=new Array,this.signalHandlers(),e.On("contextCreated",function(e){n.LocalPeerId=e.peerId,n.Context=e.context,n.OnContextCreated(e)}),e.On("contextChanged",function(e){n.Context=e,n.OnContextChanged(e)}),e.On("connectTo",function(e){n.OnConnectTo(e)})}return e.prototype.setBandwithConstraints=function(e,t){this.bandwidthConstraints=new c(e,t)},e.prototype.setMediaBitrates=function(e){return this.setMediaBitrate(this.setMediaBitrate(e,"video",this.bandwidthConstraints.videobandwidth),"audio",this.bandwidthConstraints.audiobandwidth)},e.prototype.setMediaBitrate=function(e,t,n){for(var r=e.split("\n"),o=-1,i=0;i<r.length;i++)if(0===r[i].indexOf("m="+t)){o=i;break}if(-1===o)return e;for(o++;0===r[o].indexOf("i=")||0===r[o].indexOf("c=");)o++;if(0===r[o].indexOf("b"))return r[o]="b=AS:"+n,r.join("\n");var s=r.slice(0,o);return s.push("b=AS:"+n),(s=s.concat(r.slice(o,r.length))).join("\n")},e.prototype.CreateDataChannel=function(e){var t=new a(e);return this.DataChannels.push(t),t},e.prototype.RemoveDataChannel=function(e){var t=this.DataChannels.filter(function(t){return t.Name===e})[0];this.DataChannels.splice(this.DataChannels.indexOf(t),1)},e.prototype.signalHandlers=function(){var e=this;this.brokerProxy.On("contextSignal",function(t){switch(JSON.parse(t.message).type){case"offer":e.onOffer(t);break;case"answer":e.onAnswer(t);break;case"candidate":e.onCandidate(t)}})},e.prototype.addError=function(e){this.OnError(e)},e.prototype.OnConnectTo=function(e){this.Connect(e)},e.prototype.OnConnected=function(e){this.OnContextConnected(this.findPeerConnection(e),this.getPeerConnection(e))},e.prototype.OnDisconnected=function(e){var t=this.getPeerConnection(e);this.OnContextDisconnected(this.findPeerConnection(e),t),t.close(),this.removePeerConnection(e)},e.prototype.onCandidate=function(e){var t=this,n=JSON.parse(e.message).iceCandidate;this.getPeerConnection(e.sender).addIceCandidate(new RTCIceCandidate(n)).then(function(){}).catch(function(e){t.addError(e)})},e.prototype.onAnswer=function(e){var t=this;this.getPeerConnection(e.sender).setRemoteDescription(new RTCSessionDescription(JSON.parse(e.message))).then(function(e){}).catch(function(e){t.addError(e)})},e.prototype.onOffer=function(e){var t=this,n=this.getPeerConnection(e.sender);this.LocalStreams.forEach(function(e){e.getTracks().forEach(function(t){n.addTrack(t,e)})}),n.setRemoteDescription(new RTCSessionDescription(JSON.parse(e.message))),n.createAnswer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(r){n.setLocalDescription(r).then(function(){t.bandwidthConstraints&&(r.sdp=t.setMediaBitrates(r.sdp));var n={sender:t.LocalPeerId,recipient:e.sender,message:JSON.stringify(r)};t.brokerProxy.Invoke("contextSignal",n)}).catch(function(e){return t.addError(e)})}).catch(function(e){return t.addError(e)})},e.prototype.AddLocalStream=function(e){return this.LocalStreams.push(e),this},e.prototype.AddIceServer=function(e){return this.rtcConfig.iceServers.push(e),this},e.prototype.removePeerConnection=function(e){var t=this.Peers.filter(function(t){return t.id===e})[0],n=this.Peers.indexOf(t);n>-1&&this.Peers.splice(n,1)},e.prototype.createPeerConnection=function(e){var t=this,n=new RTCPeerConnection(this.rtcConfig);return n.onsignalingstatechange=function(e){},n.onicecandidate=function(n){if(n&&n.candidate&&n.candidate){var r={sender:t.LocalPeerId,recipient:e,message:JSON.stringify({type:"candidate",iceCandidate:n.candidate})};t.brokerProxy.Invoke("contextSignal",r)}},n.oniceconnectionstatechange=function(n){switch(n.target.iceConnectionState){case"connected":t.OnConnected(e);break;case"disconnected":t.OnDisconnected(e)}},n.ontrack=function(n){var r=t.Peers.filter(function(t){return t.id===e})[0];r.stream.addTrack(n.track),t.OnRemoteTrack(n.track,r)},this.DataChannels.forEach(function(t){var r=new s(e,n.createDataChannel(t.Name),t.Name);t.AddPeerChannel(r),n.ondatachannel=function(n){var r=n.channel;r.onopen=function(n){t.OnOpen(n,e)},r.onclose=function(n){t.RemovePeerChannel(e,n.target),t.OnClose(n,e)},r.onmessage=function(e){t.OnMessage(e)}}}),n},e.prototype.findPeerConnection=function(e){var t=this.getPeerIndex(e);return this.Peers[t]},e.prototype.reconnectAll=function(){var e=this,t=this.Peers.map(function(t){var n=new r;return n.peerId=t.id,n.context=e.Context,n});return this.Peers=new Array,this.Connect(t),t},e.prototype.getPeerConnection=function(e){var t=this.Peers.filter(function(t){return t.id===e});if(0===t.length){var n=new o(e,this.createPeerConnection(e));return this.Peers.push(n),n.RTCPeer}return t[0].RTCPeer},e.prototype.createOffer=function(e){var t=this,n=this.createPeerConnection(e.peerId);return this.LocalStreams.forEach(function(e){e.getTracks().forEach(function(t){n.addTrack(t,e)}),t.OnLocalStream(e)}),n.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(r){n.setLocalDescription(r).then(function(){t.bandwidthConstraints&&(r.sdp=t.setMediaBitrates(r.sdp));var n={sender:t.LocalPeerId,recipient:e.peerId,message:JSON.stringify(r)};t.brokerProxy.Invoke("contextSignal",n)}).catch(function(e){t.addError(e)})}).catch(function(e){t.addError(e)}),n},e.prototype.Disconnect=function(){this.Peers.forEach(function(e){e.RTCPeer.close()}),this.ChangeContext(Math.random().toString(36).substring(2))},e.prototype.DisconnectPeer=function(e){this.findPeerConnection(e).RTCPeer.close()},e.prototype.Connect=function(e){var t=this;return e.forEach(function(e){var n=new o(e.peerId,t.createOffer(e));t.Peers.push(n)}),this},e.prototype.ChangeContext=function(e){return this.brokerProxy.Invoke("changeContext",{context:e}),this},e.prototype.ConnectPeers=function(){this.brokerProxy.Invoke("connectContext",{})},e.prototype.ConnectContext=function(){this.ConnectPeers()},e}();e.WebRTC=u;var l=function(){function t(t,n,r){var o=this;this.url=t,this.proxys=new Array,this.ws=new WebSocket(t+this.toQuery(r||{})),this.ws.binaryType="arraybuffer",n.forEach(function(e){o.proxys.push(new p(e,o.ws))}),this.ws.onmessage=function(t){if("object"!=typeof t.data){var n=JSON.parse(t.data);o.GetProxy(n.C).Dispatch(n.T,n.D)}else{n=e.BinaryMessage.fromArrayBuffer(t.data);o.GetProxy(n.C).Dispatch(n.T,n.D,n.B)}},this.ws.onclose=function(e){o.IsConnected=!1,o.OnClose.apply(o,[e])},this.ws.onerror=function(e){o.OnError.apply(o,[e])},this.ws.onopen=function(e){o.IsConnected=!0,o.OnOpen.apply(o,o.proxys)}}return t.prototype.toQuery=function(e){return"?"+Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},t.prototype.Close=function(){this.ws.close()},t.prototype.GetProxy=function(e){return this.proxys.filter(function(t){return t.alias===e})[0]},t.prototype.RemoveProxy=function(e){var t=this.proxys.indexOf(this.GetProxy(e));this.proxys.splice(t,1)},t.prototype.OnOpen=function(e){},t.prototype.OnError=function(e){},t.prototype.OnClose=function(e){},t}();e.Factory=l;var f=function(){return function(e,t){this.fn=t,this.topic=e,this.count=0}}();e.Listener=f;var d=function(){function e(){}return e.stingToBuffer=function(e){for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=255&e.charCodeAt(r);return new Uint8Array(n)},e.arrayToLong=function(e){for(var t=0,n=e.byteLength-1;n>=0;n--)t=256*t+e[n];return t},e.longToArray=function(e){for(var t=new Uint8Array(8),n=t.length,r=0;r<n;r++){var o=255&e;t[r]=o,e=(e-o)/256}return t},e.newGuid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e}();e.Utils=d;var h=function(){return function(){this.messageId=e.Utils.newGuid()}}();e.PropertyMessage=h;var p=function(){function t(e,t){var n=this;this.alias=e,this.ws=t,this.listeners=new Array,this.IsConnected=!1,this.On("___error",function(e){n.OnError(e)})}return t.prototype.OnError=function(e){},t.prototype.OnOpen=function(e){},t.prototype.OnClose=function(e){},t.prototype.Connect=function(){return this.ws.send(new e.Message("___connect",{},this.alias).toString()),this},t.prototype.Close=function(){return this.ws.send(new e.Message("___close",{},this.alias).toString()),this},t.prototype.Subscribe=function(t,n){return this.ws.send(new e.Message("___subscribe",{topic:t,controller:this.alias},this.alias).toString()),this.On(t,n)},t.prototype.Unsubscribe=function(t){this.ws.send(new e.Message("___unsubscribe",{topic:t,controller:this.alias},this.alias).toString())},t.prototype.On=function(t,n){var r=new e.Listener(t,n);return this.listeners.push(r),r},t.prototype.findListener=function(e){return this.listeners.filter(function(t){return t.topic===e})[0]},t.prototype.Off=function(e){var t=this.listeners.indexOf(this.findListener(e));t>=0&&this.listeners.splice(t,1)},t.prototype.InvokeBinary=function(e){if(e instanceof ArrayBuffer)return this.ws.send(e),this;throw"parameter provided must be an ArrayBuffer constructed by Client.BinaryMessage"},t.prototype.PublishBinary=function(e){if(e instanceof ArrayBuffer)return this.ws.send(e),this;throw"parameter provided must be an ArrayBuffer constructed by Client.BinaryMessage"},t.prototype.Invoke=function(t,n,r){return this.ws.send(new e.Message(t,n,r||this.alias).toString()),this},t.prototype.Publish=function(t,n,r){return this.ws.send(new e.Message(t,n,r||this.alias).toString()),this},t.prototype.SetProperty=function(e,t,n){return this.Invoke(e,t,n||this.alias),this},t.prototype.Dispatch=function(e,t,n){if("___open"===e)return this.IsConnected=!0,void this.OnOpen(JSON.parse(t));if("___close"===e)this.OnClose([JSON.parse(t)]),this.IsConnected=!1;else{var r=this.findListener(e);r&&r.fn(JSON.parse(t),n)}},t}();e.Proxy=p}(t.ThorIOClient||(t.ThorIOClient={}))},function(e,t,n){
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
!function(t,n){e.exports=n()}(0,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(1)),s=c(n(3)),a=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===r(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,a.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return l("action",e)}},{key:"defaultTarget",value:function(e){var t=l("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return l("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}();function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}e.exports=u},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2));var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return o(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":r(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=s},function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(e),r.removeAllRanges(),r.addRange(o),t=r.toString()}return t}},function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function o(){r.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,s=r.length;i<s;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=n},function(e,t,n){var r=n(5),o=n(6);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(r.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}(e,t,n);if(r.string(e))return function(e,t,n){return o(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=n(7);function o(e,t,n,o,i){var s=function(e,t,n,o){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&o.call(e,n)}}.apply(this,arguments);return e.addEventListener(n,s,i),{destroy:function(){e.removeEventListener(n,s,i)}}}e.exports=function(e,t,n,r,i){return"function"==typeof e.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return o(e,t,n,r,i)}))}},function(e,t){var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=function(e,t){for(;e&&e.nodeType!==n;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}}])})}]);